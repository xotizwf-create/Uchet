1. Логика процесса (Under the hood)
Имитация запроса: При клике срабатывает функция handleAuth. Система предотвращает перезагрузку страницы (e.preventDefault()) и запускает искусственную задержку в 500 мс. Это создает ощущение, что приложение "думает", отправляя данные на сервер.
Смена состояния: Спустя 0.5 секунды состояние authStep переключается с 'credentials' (ввод логина/пароля) на 'verification' (ввод кода).
Сброс таймеров: Запускается таймер обратного отсчета (59 секунд) для повторной отправки кода.
2. Анимация перехода (Transition)
Здесь используется паттерн "Slide Over":
Исчезновение (Exit): Текущая форма с логином и паролем плавно смещается влево (x: -50px) и одновременно становится прозрачной (opacity: 0).
Появление (Enter): Новая форма верификации выезжает справа (x: 50px → 0px) с легким эффектом торможения (easeOut), занимая место предыдущей.
Высота окна: Контейнер модального окна подстраивается под высоту нового контента (хотя визуально она почти идентична).
3. Детальный разбор окна "Проверка безопасности"
Как только форма появляется, запускается каскад микро-анимаций (choreographed animation):
А. Центральная иконка (Hero Icon)
Это самый динамичный элемент, привлекающий внимание:
Радар (Pulse): На заднем плане, за иконкой, пульсирует полупрозрачный круг (animate-ping), имитируя процесс отправки сигнала/письма в сеть.
Появление (Pop & Rotate): Темно-синий круг с иконкой конверта появляется из центра (scale: 0 → 1) и одновременно совершает вращение на 180 градусов. Эффект "пружины" (spring physics) делает движение живым и упругим.
Бейдж успеха (Success Badge): Спустя 0.4 секунды (после остановки вращения) в правом верхнем углу иконки "выпрыгивает" маленький зеленый кружок с галочкой. Это визуальное подтверждение: "Письмо успешно отправлено".
Б. Текст (Headings)
Заголовок "Проверка безопасности" и описание с email-адресом появляются плавно снизу вверх (y: 10px → 0px) с небольшой задержкой.
Email (user@prostavki.com) выделен белым жирным шрифтом для контраста.
В. Поля ввода кода (OTP Inputs)
Это ключевой элемент взаимодействия:
Каскад (Stagger): 6 ячеек для цифр появляются не одновременно, а по очереди слева направо с интервалом в 0.05 секунды.
Эффект: Каждая ячейка имеет пружинистую анимацию появления, создавая эффект "волны".
Стиль ячейки: Темно-серый фон (bg-slate-800), при фокусе рамка загорается фирменным фиолетовым цветом, появляется фиолетовое свечение (shadow).
Логика: Курсор автоматически встает в первое поле. При вводе цифры фокус мгновенно перескакивает в следующее поле.
Г. Кнопки действий (Footer Actions)
Появляются последними (delay 0.6s - 0.8s):
Кнопка "Подтвердить вход": Основная фиолетовая кнопка.
Таймер: Строка "Отправить повторно через 00:59". Иконка часов и текст серые, таймер — чуть светлее, моноширинным шрифтом (чтобы цифры не "прыгали"). Когда время истечет, текст сменится на активную кнопку "Отправить код повторно".
Кнопка "Вернуться назад": Маленькая кнопка в самом низу со стрелкой, позволяющая вернуться к вводу логина, если email был указан неверно.